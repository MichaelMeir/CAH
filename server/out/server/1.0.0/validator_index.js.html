<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: validator/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: validator/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @private
 * @description Rules that can be used in a validator template
 */
const RULES = {
    "string": (value, args) => {
        return typeof value == "string"
    },

    "min": (value, args) => {
        return value.length >= Number(args[0])
    },

    "max": (value, args) => {
        return value.length &lt;= Number(args[0])
    },

    "mail": (value, args) => {
        return /(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gm.exec(value)
    },

    "word": (value, args) => {
        return /^[\w][^_]*$/gm.exec(value)
    }
}


/**
 * @method validator
 * @description Validates data with given template, template requires keys with values as rules
 * 
 * @param {Object} data Data given from the request body
 * @param {Object} template template with keys and rules as values
 * 
 * @returns {Boolean} Returns true if data validates with the given template
 */
module.exports = (data, template) => {
    let keys = Object.keys(template)
    //loop through template keys
    for(let i = 0; i &lt; keys.length; i++) {
        //get key
        let key = keys[i]
        //get value of request
        let value = data[key]
        //check if value exists in request
        if(value) {
            //get rule list from template
            let ruleList = template[key]
            //split rule list to individual rules
            let rules = ruleList.split(" ")
            //loop through all rules
            for(let j = 0; j &lt; rules.length; j++) {
                //split arguments in rule
                let args = rules[j].split(":")
                //get the rule function of the rule
                let ruleFunc = RULES[args.shift()]
                //check if rule function exists
                if(ruleFunc) {
                    //get result of rule function using the request value
                    let result = ruleFunc(value, args)
                    //return false if rule function failed
                    if(!result) return false
                }
            }
        }else{
            //return false if value did not exist in request
            return false
        }
    }
    return true
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#response">response</a></li><li><a href="global.html#validator">validator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Sep 13 2019 14:15:24 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
